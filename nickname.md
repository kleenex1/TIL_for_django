# 닉네임 필드 추가하기

![1](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112230.png)<br>
* 모델을 변경했으니까 migration을 해주면 되는데, 지금 데이터베이스에는 이미 유저가 있기 때문에 오류가 난다.
* default 값을 정해줘도 unique 조건이 있기 때문에 migration이 안된다.
	* 2가지 방법
		1. unique=True 삭제 → default 닉네임 설정 → 어드민페이지에서 닉네임 수정
		2.  null=True 추가 → 어드민페이지에서 닉네임 수정
			1. 회원가입 페이지에서 닉네임을 받으려면 일단 null을 받는 방법으로 한다.
![2](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112246.png)<br>

Allauth는 기본 유저 정보를 먼저 생성하고 그 후에 닉네임과 같은 추가정보들을 채워 넣는다. 그렇기 때문에 처음에 유저를 생성할 때는 닉네임이 채워지지 않는다. 그래서 2번째 방법으로 한다.(Allauth에 국한된 방법, 추가필드에 대한 부분은 항상 동일)<br>

![3](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112318.png)<br>
유저 모델에 추가한 필드는 따로 나타나지 않기 때문에
따로 추가해준 것<br>
![4](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112355.png)<br>
커스텀 필드가 생겼다.

회원가입시 form을 설정하기<br>
![5](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112641.png)<br>
기본적인 유저네임, 이메일 등은 제외하고 추가할 필드만 명시해주면 된다.
form에 기입된 데이터는 cleaned_data로 가져올 수 있다. nickname 필드가 아니더라도 cleaned_data에 필드 값을 넣고 유저 인스턴스를 저장해주면 된다.
그뒤 settings에 추가해주면된다.<br>

![6](./nickname/%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B2%98%202022-11-10%20112740.png)

